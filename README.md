csgo-executes
=============

[![Build status](http://ci.splewis.net/job/csgo-executes/badge/icon)](http://ci.splewis.net/job/csgo-executes/)

No support beyond this README is provided for this plugin at this time. Do not ask for it unless you're volunteering to contribute. There are many known bugs; please do not report them unless you are submitting a pull request to fix them.

## Installation

#### Instructions

Download the archive from the latest [build](http://ci.splewis.net/job/csgo-executes/lastSuccessfulBuild/) and extract ALL the files to the game server. This includes both the ``executes.smx`` and ``csutils.smx`` plugin files needed.

Note: the ``csutils.smx`` plugin comes from the [practicemode](https://github.com/splewis/csgo-practice-mode) project, and is used to throw the execute grenades via an invisible bot. It's buggy and doesn't let grenades be thrown in freezetime. I'd like to get rid of needing it too.

#### Configuration

The file ``cfg/sourcemod/executes/executes.cfg`` will be autogenerated when the plugin is first run and you can tweak it if you wish.

You may also tweak the values in ``cfg/sourcemod/executes/executes_game.cfg``, which is executed by the plugin each map start.


#### Creating Executes and Spawns

No default spawns or executes are provided. You must launch the editor and add them yourself. It's kind of hard to work with, so feel free to submit a [pull request](https://github.com/splewis/csgo-executes/pulls) to make it better.

``!edit``: launches the editor, opens the edit menu. You will use this a lot
``!setname``: sets the name of the spawn/execute being edited
``!clearbuffers``: clears any spawn/execute edit buffers

When working on a map, you should:
1. Add CT spawns. Each has a notion of 'friendliness' to a site. For example, a B site spawn on de_cache should typically have a '5' friendliness to B and a '1' to A. A spawn in mid might have a '3' to each site. This must be accurate for the CT spawn algorithm to work.
1. Add some basic T spawns. Add them in spots you don't throw nades from.
1. Start adding the spawns for the smokes/mollies you want. To do this, stand in the spot, go to 'new spawn' in the menu, throw the greande, and save the spawn. The editor will remember the LAST grenade thrown
1. Start adding executes. You will select a list of 'required' T spawns for the execute (typically these are your set smokes), and 'optional' ones. The execute is only eligible to be picked if all the required spawns can be chosen (so if there are 4 required spawns, there must be at least 4 T's).

Other notes:
- All spawns have a 'awp friendliness' rating. Spots good for awpers should get a 5, spots very bad should get a 1.
- I don't recommend using the special support for 'lurk' spawns. The feature was never finished.
- You can set some flags on spawns for some extra flavor, e.g. CT spawns can be marked with a 'mag7' flag so sometimes a CT spawned there will get a mag7. There are several flags for T and CT spawns.
- Only 1 player should be workiing on the editor at a time. It saves a single buffer for the spawn/execute being edited, not one per player. If multiple players are throwing nades, the buffer will **keep getting overwritten**.
- Install [practicemode](https://github.com/splewis/csgo-practice-mode) for a better editing experience so you will have the ``.back`` command, which helps you make sure your nades landed before saving them.
- The editor can be buggy. Saving the config & reloading them can help if your spawns aren't showing up on the 'add spawns' menu for the execute builder menu.
- If you don't know how something works, **look at the code**.


## Contributing

[Pull requests](https://github.com/splewis/csgo-executes/pulls) will be reviewed if they meet a few guidelines:
- Follow the code style (2 spaces for indentation, 100 line column limits, same bracing style)
- Add some useful feature or make the use of plugin better.
- Don't make arbitrary gameplay changes - those should be left out. I am not interesting in debating gameplay decisions. The plugin has an [API](scripting/include/executes.inc) for a reason - leave your other gameplay choices in other plugins. If you need a new native/forward (and you very likely **will**) feel free to add it.

There is a significant amount of bad code and TODOs - 95% of this was written in a few days. Cleaning those problems up is appreciated. Removing the dependency of csutils would be good.
